<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Language MySQL <a href="https://travis-ci.org/OpenFn/language-mysql"><img src="https://travis-ci.org/OpenFn/language-mysql.svg?branch=master" alt="Build Status"></a></h1>
<p>Language Pack for building expressions and operations to run MySQL queries.</p>
<p><strong>See
<a href="https://github.com/OpenFn/language-mysql/blob/master/src/Adaptor.js"><code>src/Adaptor.js</code></a>
for the full list of available helper functions including <code>upsert(...)</code>.</strong></p>
<h2>Documentation</h2>
<h2>sample configuration</h2>
<pre class="prettyprint source lang-json"><code>{
  &quot;host&quot;: &quot;some-host-url.compute-1.amazonaws.com&quot;,
  &quot;port&quot;: &quot;3306&quot;,
  &quot;database&quot;: &quot;wouldntyouliketoknow&quot;,
  &quot;user&quot;: &quot;me&quot;,
  &quot;password&quot;: &quot;noway&quot;
}
</code></pre>
<h2>Execute a query</h2>
<p>Execute an sql query with the node mysql package.</p>
<pre class="prettyprint source lang-js"><code>query({
  sql: state => {
    return `select * from ${state.data.table} where id = ?;`;
  },
  timeout: 4000,
  values: ['007'],
});
</code></pre>
<h2>Execute a sql query</h2>
<p>This function takes either a <code>string</code> or a <code>function</code> that takes states and returns a string.</p>
<pre class="prettyprint source lang-js"><code>sqlString(state => {
  return (
    `INSERT INTO untitled_table (name, the_geom) VALUES ('` +
    state.data.version +
    `', ` +
    dataValue('form.Choix_tache')(state) +
    `)`
  );
});
</code></pre>
<h2>Insert a single record</h2>
<p>This function is used to insert a single record in a MySQL database.</p>
<pre class="prettyprint source lang-js"><code>insert(
  'some_table',
  fields(
    field('firstname', dataValue('form.patient_firstname')),
    field('lastname', dataValue('form.patient_lastname'))
  )
);
</code></pre>
<h2>Insert or update a single record</h2>
<p>This function is used to insert a single record in a MySQL database or update it
if there is a match.</p>
<pre class="prettyprint source lang-js"><code>upsert(
  'some_table',
  fields(
    field('firstname', dataValue('form.patient_firstname')),
    field('lastname', dataValue('form.patient_lastname'))
  )
);
</code></pre>
<h2>Development</h2>
<p>Clone the repo, run <code>npm install</code>.</p>
<p>Run tests using <code>npm run test</code> or <code>npm run test:watch</code></p>
<p>Build the project using <code>make</code>.</p>
<p>To build the docs for this repo, run
<code>./node_modules/.bin/jsdoc --readme ./README.md ./lib -d docs</code>.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Adaptor.html">Adaptor</a></li></ul><h3>Classes</h3><ul><li><a href="module-Adaptor-execute.html">execute</a></li><li><a href="module-Adaptor-insert.html">insert</a></li><li><a href="module-Adaptor-query.html">query</a></li><li><a href="module-Adaptor-sqlString.html">sqlString</a></li><li><a href="module-Adaptor-upsert.html">upsert</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Wed Feb 17 2021 12:23:29 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>